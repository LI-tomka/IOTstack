
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Docker stack for getting started on IOT on the Raspberry PI">
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.0.2">
    
    
      
        <title>Blynk server - IOTstack</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.816931ca.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.9204c3b2.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>function __md_scope(e,t,_){return new URL(_||(t===localStorage?"../..":"../.."),location).pathname+"."+e}function __md_get(e,t=localStorage,_){return JSON.parse(t.getItem(__md_scope(e,t,_)))}function __md_set(e,t,_=localStorage,o){try{_.setItem(__md_scope(e,_,o),JSON.stringify(t))}catch(e){}}</script>
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#blynk-server" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="IOTstack" class="md-header__button md-logo" aria-label="IOTstack" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            IOTstack
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Blynk server
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/SensorsIot/IOTstack/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="IOTstack" class="md-nav__button md-logo" aria-label="IOTstack" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    IOTstack
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/SensorsIot/IOTstack/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        IOTStack Wiki
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../Accessing-your-Device-from-the-internet/" class="md-nav__link">
        Accessing your device from the internet
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../Backup-and-Restore/" class="md-nav__link">
        Backing up and restoring IOTstack
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../BuildStack-RandomPassword/" class="md-nav__link">
        Build Stack Random Services Password
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../BuildStack-Services/" class="md-nav__link">
        Build Stack Services system
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../Contributing-Services/" class="md-nav__link">
        Contributing a service to IOTstack
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../Custom/" class="md-nav__link">
        Custom services and overriding default settings for IOTstack
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../Default-Configs/" class="md-nav__link">
        Build Stack Default Passwords for Services
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../Docker-commands/" class="md-nav__link">
        Docker commands
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../Getting-Started/" class="md-nav__link">
        Getting Started
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../Home/" class="md-nav__link">
        Wiki
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../How-the-script-works/" class="md-nav__link">
        How the script works
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../Menu-System/" class="md-nav__link">
        Menu system
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../Misc/" class="md-nav__link">
        Miscellaneous
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../Native-RTL_433/" class="md-nav__link">
        Native RTL_433
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../Networking/" class="md-nav__link">
        Networking
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../New-Menu-Release-Notes/" class="md-nav__link">
        New IOTstack Menu
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../PostBuild-Script/" class="md-nav__link">
        Postbuild BASH Script
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../RPIEasy_native/" class="md-nav__link">
        RPIEasy
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../Understanding-Containers/" class="md-nav__link">
        What is Docker?
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../Updating-the-Project/" class="md-nav__link">
        Updating the project
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../gcgarner-migration/" class="md-nav__link">
        Migrating from gcgarner to SensorsIot
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_23" type="checkbox" id="__nav_23" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_23">
          Containers
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Containers" data-md-level="1">
        <label class="md-nav__title" for="__nav_23">
          <span class="md-nav__icon md-icon"></span>
          Containers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../AdGuardHome/" class="md-nav__link">
        AdGuard Home
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Adminer/" class="md-nav__link">
        Adminer
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Blynk server
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Blynk server
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#references" class="md-nav__link">
     References 
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#significant-directories-and-files" class="md-nav__link">
     Significant directories and files 
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-blynk-server-gets-built-for-iotstack" class="md-nav__link">
     How Blynk Server gets built for IOTstack 
  </a>
  
    <nav class="md-nav" aria-label=" How Blynk Server gets built for IOTstack ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#github-updates" class="md-nav__link">
     GitHub Updates 
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iotstack-menu" class="md-nav__link">
     IOTstack menu 
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iotstack-first-run" class="md-nav__link">
     IOTstack first run 
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logging" class="md-nav__link">
     Logging 
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#changing-blynk-servers-configuration" class="md-nav__link">
     Changing Blynk Server's configuration 
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-a-clean-slate" class="md-nav__link">
     Getting a clean slate 
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#upgrading-blynk-server" class="md-nav__link">
     Upgrading Blynk Server 
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-blynk-server" class="md-nav__link">
     Using Blynk Server 
  </a>
  
    <nav class="md-nav" aria-label=" Using Blynk Server ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#connecting-to-the-administrative-ui" class="md-nav__link">
     Connecting to the administrative UI 
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#change-username-and-password" class="md-nav__link">
     Change username and password 
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setup-gmail" class="md-nav__link">
     Setup gmail 
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iosandroid-app-setup" class="md-nav__link">
     iOS/Android app setup 
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quick-usage-guide-for-app" class="md-nav__link">
     Quick usage guide for app 
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#node-red" class="md-nav__link">
     Node-RED 
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Chronograf/" class="md-nav__link">
        Chronograf
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../DashMachine/" class="md-nav__link">
        DashMachine
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../EspruinoHub/" class="md-nav__link">
        Espruinohub
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Grafana/" class="md-nav__link">
        Grafana
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Heimdall/" class="md-nav__link">
        Heimdall
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Home-Assistant/" class="md-nav__link">
        Home Assistant
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Homer/" class="md-nav__link">
        Homer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../InfluxDB/" class="md-nav__link">
        InfluxDB
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Kapacitor/" class="md-nav__link">
        Kapacitor
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../MariaDB/" class="md-nav__link">
        MariaDB
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Mosquitto/" class="md-nav__link">
        Mosquitto
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../MotionEye/" class="md-nav__link">
        MotionEye
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../NextCloud/" class="md-nav__link">
        Nextcloud
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Node-RED/" class="md-nav__link">
        Node-RED
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Octoprint/" class="md-nav__link">
        OctoPrint – the snappy web interface for your 3D printer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Pi-hole/" class="md-nav__link">
        Pi-hole
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Plex/" class="md-nav__link">
        Plex
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Portainer-agent/" class="md-nav__link">
        Portainer agent
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Portainer-ce/" class="md-nav__link">
        Portainer CE
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../PostgreSQL/" class="md-nav__link">
        PostgreSQL
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Prometheus/" class="md-nav__link">
        Prometheus
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Python/" class="md-nav__link">
        Python
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../RTL_433-docker/" class="md-nav__link">
        RTL_433 Docker
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../TasmoAdmin/" class="md-nav__link">
        TasmoAdmin
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Telegraf/" class="md-nav__link">
        Telegraf
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../WireGuard/" class="md-nav__link">
        WireGuard
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Zigbee2MQTT/" class="md-nav__link">
        Zigbee2MQTT
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Zigbee2mqttassistant/" class="md-nav__link">
        Zigbee2Mqtt Assistant
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../deconz/" class="md-nav__link">
        deCONZ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../diyHue/" class="md-nav__link">
        DIY hue
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../openHAB/" class="md-nav__link">
        openHAB
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../x2go/" class="md-nav__link">
        x2go
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#references" class="md-nav__link">
     References 
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#significant-directories-and-files" class="md-nav__link">
     Significant directories and files 
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-blynk-server-gets-built-for-iotstack" class="md-nav__link">
     How Blynk Server gets built for IOTstack 
  </a>
  
    <nav class="md-nav" aria-label=" How Blynk Server gets built for IOTstack ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#github-updates" class="md-nav__link">
     GitHub Updates 
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iotstack-menu" class="md-nav__link">
     IOTstack menu 
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iotstack-first-run" class="md-nav__link">
     IOTstack first run 
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logging" class="md-nav__link">
     Logging 
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#changing-blynk-servers-configuration" class="md-nav__link">
     Changing Blynk Server's configuration 
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-a-clean-slate" class="md-nav__link">
     Getting a clean slate 
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#upgrading-blynk-server" class="md-nav__link">
     Upgrading Blynk Server 
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-blynk-server" class="md-nav__link">
     Using Blynk Server 
  </a>
  
    <nav class="md-nav" aria-label=" Using Blynk Server ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#connecting-to-the-administrative-ui" class="md-nav__link">
     Connecting to the administrative UI 
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#change-username-and-password" class="md-nav__link">
     Change username and password 
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setup-gmail" class="md-nav__link">
     Setup gmail 
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iosandroid-app-setup" class="md-nav__link">
     iOS/Android app setup 
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quick-usage-guide-for-app" class="md-nav__link">
     Quick usage guide for app 
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#node-red" class="md-nav__link">
     Node-RED 
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
<a href="https://github.com/SensorsIot/IOTstack/edit/master/docs/Containers/Blynk_server.md" title="Edit this page" class="md-content__button md-icon">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
</a>


<h1 id="blynk-server">Blynk server</h1>
<p>This document discusses an IOTstack-specific version of Blynk-Server. It is built on top of an <a href="https://hub.docker.com/_/ubuntu">Ubuntu</a> base image using a <em>Dockerfile</em>.</p>
<h2 id="references"><a name="references"> References </a></h2>
<ul>
<li><a href="https://hub.docker.com/_/ubuntu">Ubuntu base image</a> at DockerHub</li>
<li><a href="https://github.com/Peterkn2001/blynk-server">Peter Knight Blynk-Server fork</a> at GitHub (includes documentation)</li>
<li><a href="https://github.com/Peterkn2001/blynk-server/releases/">Peter Knight Blynk-Server releases</a> at GitHub</li>
<li><a href="https://blynk.io">Blynk home page</a> at blynk.io</li>
<li><a href="https://docs.blynk.io/en/">Blynk documentation</a> at blynk.io</li>
<li><a href="https://community.blynk.cc/">Blynk community forum</a> at community.blynk.cc</li>
<li><a href="https://community.blynk.cc/t/my-home-automation-projects-built-with-mqtt-and-node-red/29045">Interesting post by Peter Knight on MQTT/Node Red flows</a>  at community.blynk.cc</li>
<li><a href="https://github.com/877dev/Node-Red-flow-examples">Blynk flow examples</a> at GitHub</li>
</ul>
<p>Acknowledgement:</p>
<ul>
<li>Original writeup from @877dev</li>
</ul>
<h2 id="significant-directories-and-files"><a name="significantFiles"> Significant directories and files </a></h2>
<div class="highlight"><pre><span></span><code>~/IOTstack
├── .templates
│   └── blynk_server
│       ├── Dockerfile ❶
│       ├── docker-entrypoint.sh ❷
│       ├── iotstack_defaults ❸
│       │   ├── mail.properties
│       │   └── server.properties
│       └── service.yml ❹
├── services
│   └── blynk_server
│       └── service.yml ❺
├── docker-compose.yml ❻
└── volumes
    └── blynk_server ❼
        ├── config ❽
        │   ├── mail.properties
        │   └── server.properties
        └── data
</code></pre></div>
<ol>
<li>The <em>Dockerfile</em> used to construct Blynk Server on top of Ubuntu.</li>
<li>A start-up script designed to handle container self-repair.</li>
<li>A folder holding the default versions of the configuration files.</li>
<li>The <em>template service definition</em>.</li>
<li>The <em>working service definition</em> (only relevant to old-menu, copied from ❹).</li>
<li>The <em>Compose</em> file (includes ❹).</li>
<li>The <em>persistent storage area</em> for the <code>blynk_server</code> container.</li>
<li>Working copies of the configuration files (copied from ❸).</li>
</ol>
<p>Everything in ❽:</p>
<ul>
<li>will be replaced if it is not present when the container starts; but</li>
<li>will never be overwritten if altered by you.</li>
</ul>
<h2 id="how-blynk-server-gets-built-for-iotstack"><a name="howBlynkServerIOTstackGetsBuilt"> How Blynk Server gets built for IOTstack </a></h2>
<h3 id="github-updates"><a name="dockerHubImages"> GitHub Updates </a></h3>
<p>Periodically, the source code is updated and a new version is released. You can check for the latest version at the <a href="https://github.com/Peterkn2001/blynk-server/releases/">releases page</a>.</p>
<h3 id="iotstack-menu"><a name="iotstackMenu"> IOTstack menu </a></h3>
<p>When you select Blynk Server in the IOTstack menu, the <em>template service definition</em> is copied into the <em>Compose</em> file.</p>
<blockquote>
<p>Under old menu, it is also copied to the <em>working service definition</em> and then not really used.</p>
</blockquote>
<h3 id="iotstack-first-run"><a name="iotstackFirstRun"> IOTstack first run </a></h3>
<p>On a first install of IOTstack, you run the menu, choose your containers, and are told to do this:</p>
<div class="highlight"><pre><span></span><code>$ <span class="nb">cd</span> ~/IOTstack
$ docker-compose up -d
</code></pre></div>
<p><code>docker-compose</code> reads the <em>Compose</em> file. When it arrives at the <code>blynk_server</code> fragment, it finds:</p>
<div class="highlight"><pre><span></span><code>  blynk_server:
    build:
      context: ./.templates/blynk_server/.
      args:
        - BLYNK_SERVER_VERSION=0.41.16
</code></pre></div>
<p>The <code>build</code> statement tells <code>docker-compose</code> to look for:</p>
<div class="highlight"><pre><span></span><code>~/IOTstack/.templates/blynk_server/Dockerfile
</code></pre></div>
<p>The <code>BLYNK_SERVER_VERSION</code> argument is passed into the build process. This implicitly pins each build to the version number in the <em>Compose</em> file (eg 0.41.16). If you need to update to a  </p>
<blockquote>
<p>The <em>Dockerfile</em> is in the <code>.templates</code> directory because it is intended to be a common build for <strong>all</strong> IOTstack users. This is different to the arrangement for Node-RED where the <em>Dockerfile</em> is in the <code>services</code> directory because it is how each individual IOTstack user's version of Node-RED is customised.</p>
</blockquote>
<p>The <em>Dockerfile</em> begins with:</p>
<div class="highlight"><pre><span></span><code>FROM ubuntu
</code></pre></div>
<p>The <code>FROM</code> statement tells the build process to pull down the <strong><em>base image</em></strong> from <a href="https://hub.docker.com"><em>DockerHub</em></a>.</p>
<blockquote>
<p>It is a <strong><em>base</em></strong> image in the sense that it never actually runs as a container on your Raspberry Pi.</p>
</blockquote>
<p>The remaining instructions in the <em>Dockerfile</em> customise the <strong><em>base image</em></strong> to produce a <strong><em>local image</em></strong>. The customisations are:</p>
<ol>
<li>Add packages to satisfy dependencies.</li>
<li>Add the default versions of the configuration files so that the container can perform self-repair each time it is launched.</li>
<li>Download an install the Java package that implements the Blynk Server. </li>
</ol>
<p>The <strong><em>local image</em></strong> is instantiated to become your running container.</p>
<p>When you run the <code>docker images</code> command after Blynk Server has been built, you will see two rows that are relevant:</p>
<div class="highlight"><pre><span></span><code>$ docker images
REPOSITORY              TAG      IMAGE ID       CREATED         SIZE
iotstack_blynk_server   latest   3cd6445f8a7e   <span class="m">3</span> hours ago     652MB
ubuntu                  latest   897590a6c564   <span class="m">7</span> days ago      <span class="m">49</span>.8MB
</code></pre></div>
<ul>
<li><code>ubuntu</code> is the <strong><em>base image</em></strong>; and</li>
<li><code>iotstack_blynk_server</code> is the <strong><em>local image</em></strong>.</li>
</ul>
<p>You will see the same pattern in <em>Portainer</em>, which reports the <strong><em>base image</em></strong> as "unused". You should not remove the <strong><em>base</em></strong> image, even though it appears to be unused.</p>
<h2 id="logging"><a name="logging"> Logging </a></h2>
<p>You can inspect Blynk Server's log by:</p>
<div class="highlight"><pre><span></span><code>$ docker logs blynk_server
</code></pre></div>
<h2 id="changing-blynk-servers-configuration"><a name="editConfiguration"> Changing Blynk Server's configuration </a></h2>
<p>The first time you launch the <code>blynk_server</code> container, the following structure will be created in the persistent storage area:</p>
<div class="highlight"><pre><span></span><code>~/IOTstack/volumes/blynk_server
├── [drwxr-xr-x pi      ]  config
│   ├── [-rw-r--r-- pi      ]  mail.properties
│   └── [-rw-r--r-- pi      ]  server.properties
└── [drwxr-xr-x root    ]  data
</code></pre></div>
<p>The two <code>.properties</code> files can be used to alter Blynk Server's configuration. When you make change to these files, you activate then by restarting the container:</p>
<div class="highlight"><pre><span></span><code>$ cd ~/IOTstack
$ docker-compose restart blynk_server
</code></pre></div>
<h2 id="getting-a-clean-slate"><a name="cleanSlate"> Getting a clean slate </a></h2>
<p>Erasing Blynk Server's persistent storage area triggers self-healing and restores known defaults:</p>
<p><div class="highlight"><pre><span></span><code>$ cd ~/IOTstack
$ docker-compose rm --force --stop -v blynk_server
$ sudo rm -rf ./volumes/blynk_server
$ docker-compose up -d blynk_server
</code></pre></div>
Note:</p>
<ul>
<li>
<p>You can also remove individual configuration files and then trigger self-healing. For example, if you decide to edit <code>server.properties</code> and make a mess, you can restore the original default version like this:</p>
<div class="highlight"><pre><span></span><code>$ cd ~/IOTstack
$ rm volumes/blynk_server/config/server.properties
$ docker-compose restart blynk_server
</code></pre></div>
</li>
</ul>
<h2 id="upgrading-blynk-server"><a name="upgradingBlynkServer"> Upgrading Blynk Server </a></h2>
<p>To find out when a new version has been released, you need to visit the <a href="https://github.com/Peterkn2001/blynk-server/releases/">Blynk-Server releases</a> page at GitHub.</p>
<p>At the time of writing, version 0.41.16 was the most up-to-date. Suppose that version 0.41.17 has been released and that you decide to upgrade:</p>
<ol>
<li>
<p>Edit your <em>Compose</em> file to change the version nuumber:</p>
<div class="highlight"><pre><span></span><code>  blynk_server:
    build:
      context: ./.templates/blynk_server/.
      args:
        - BLYNK_SERVER_VERSION=0.41.17
</code></pre></div>
<p>Note:</p>
<ul>
<li>You can use this method to pin Blynk Server to any available version.</li>
</ul>
</li>
<li>
<p>You then have two options:</p>
<ul>
<li>
<p>If you only want to reconstruct the <strong>local</strong> image:</p>
<div class="highlight"><pre><span></span><code>$ cd ~/IOTstack
$ docker-compose up --build -d blynk_server
$ docker system prune -f
</code></pre></div>
</li>
<li>
<p>If you want to update the Ubuntu <strong>base</strong> image at the same time:</p>
<div class="highlight"><pre><span></span><code>$ cd ~/IOTstack
$ docker-compose build --no-cache --pull blynk_server
$ docker-compose up -d blynk_server
$ docker system prune -f
$ docker system prune -f
</code></pre></div>
</li>
</ul>
</li>
</ol>
<h2 id="using-blynk-server"><a name="usingBlynkServer"> Using Blynk Server </a></h2>
<p>See the <a href="#references">References</a> for documentation links.</p>
<h3 id="connecting-to-the-administrative-ui"><a name="blynkAdmin"> Connecting to the administrative UI </a></h3>
<p>To connect to the administrative interface, navigate to:</p>
<div class="highlight"><pre><span></span><code>https://&lt;your pis IP&gt;:9443/admin
</code></pre></div>
<p>You may encounter browser security warnings which you will have to acknowledge in order to be able to connect to the page. The default credentials are:</p>
<ul>
<li>username = <code>admin@blynk.cc</code></li>
<li>password = <code>admin</code></li>
</ul>
<h3 id="change-username-and-password"><a name="changePassword"> Change username and password </a></h3>
<ol>
<li>Click on Users &gt; "email address" and edit email, name and password. </li>
<li>Save changes.</li>
<li>
<p>Restart the container using either Portainer or the command line:</p>
<div class="highlight"><pre><span></span><code>$ cd ~/IOTstack
$ docker-compose restart blynk_server
</code></pre></div>
</li>
</ol>
<h3 id="setup-gmail"><a name="gmailSetup"> Setup gmail </a></h3>
<p>Optional step, useful for getting the auth token emailed to you.
(To be added once confirmed working....)</p>
<h3 id="iosandroid-app-setup"><a name="mobileSetup"> iOS/Android app setup </a></h3>
<ol>
<li>When setting up the application on your mobile be sure to select "custom" setup <a href="https://github.com/Peterkn2001/blynk-server#app-and-sketch-changes">see</a>.</li>
<li>Press "New Project"</li>
<li>Give it a name, choose device "Raspberry Pi 3 B" so you have plenty of <a href="http://help.blynk.cc/en/articles/512061-what-is-virtual-pins">virtual pins</a> available, and lastly select WiFi.</li>
<li>Create project and the <a href="https://docs.blynk.cc/#getting-started-getting-started-with-the-blynk-app-4-auth-token">auth token</a> will be emailed to you (if emails configured). You can also find the token in app under the phone app settings, or in the admin web interface by clicking Users&gt;"email address" and scroll down to token.</li>
</ol>
<h3 id="quick-usage-guide-for-app"><a name="quickAppGuide"> Quick usage guide for app </a></h3>
<ol>
<li>Press on the empty page, the widgets will appear from the right.</li>
<li>Select your widget, let's say a button.</li>
<li>It appears on the page, press on it to configure.</li>
<li>Give it a name and colour if you want. </li>
<li>Press on PIN, and select virtual. Choose any pin i.e. V0</li>
<li>Press ok.</li>
<li>To start the project running, press top right Play button.</li>
<li>You will get an offline message, because no devices are connected to your project via the token.</li>
</ol>
<p>Enter Node-Red.....</p>
<h3 id="node-red"><a name="enterNodeRed"> Node-RED </a></h3>
<ol>
<li>Install <code>node-red-contrib-blynk-ws</code> from Manage Palette.</li>
<li>Drag a "write event" node into your flow, and connect to a debug node</li>
<li>
<p>Configure the Blynk node for the first time:</p>
<div class="highlight"><pre><span></span><code>URL: wss://youripaddress:9443/websockets
</code></pre></div>
<p>There is more information <a href="https://github.com/gablau/node-red-contrib-blynk-ws/blob/master/README.md#how-to-use">here</a>.
4. Enter your <a href="https://docs.blynk.cc/#getting-started-getting-started-with-the-blynk-app-4-auth-token">auth token</a> from before and save/exit.
5. When you deploy the flow, notice the app shows connected message, as does the Blynk node.
6. Press the button on the app, you will notice the payload is sent to the debug node.</p>
</li>
</ol>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../Adminer/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Adminer" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Adminer
            </div>
          </div>
        </a>
      
      
        
        <a href="../Chronograf/" class="md-footer__link md-footer__link--next" aria-label="Next: Chronograf" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Chronograf
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.01824240.min.js"}</script>
    
    
      <script src="../../assets/javascripts/bundle.ff0eccb3.min.js"></script>
      
    
  </body>
</html>